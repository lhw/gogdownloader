FIND_PACKAGE(ProtobufC REQUIRED)
FIND_PACKAGE(CURL REQUIRED)
FIND_PACKAGE(JSON REQUIRED)
FIND_PACKAGE(OAuth REQUIRED)

INCLUDE_DIRECTORIES(${PROTOBUFC_INCLUDE_DIRS} ${CURL_INCLUDE_DIRS} ${LIBJSON_INCLUDE_DIRS} ${LIBOAUTH_INCLUDE_DIRS})
SET(LIBS ${LIBS} ${PROTOBUFC_LIBRARIES} ${LIBJSON_LIBRARIES} ${LIBOAUTH_LIBRARIES} ${CURL_LIBRARIES})

ADD_DEFINITIONS(-std=c99)

SET(GOG_SRC gog.h
				main.c
				api.c
				http.c
				util.c
				serialization.c
)
PROTOC(PROTO_SRC state.proto)
ADD_EXECUTABLE(goglogin ${GOG_SRC} ${PROTO_SRC})
TARGET_LINK_LIBRARIES(goglogin ${LIBS})

INSTALL(TARGETS goglogin DESTINATION bin)
INSTALL(FILES gog.h DESTINATION include)
